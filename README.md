# WeatherStation: Explore World's weather!
Развиено од: Филип Деспотовски и Александар Деспотовски.
# Опис на апликацијата
WeatherStation е едноставна апликација за прегледување на временската прогноза за речиси сите места во светот. Со избор на посакуваниот град се добива тековна временска прогноза, како и прогноза за наредните седум дена. Информациите се добиваат со помош на [OpenWeatherMap](https://openweathermap.org/) API, кое е бесплатно API за временски услуги. Искористени се Current weather data и 16 day / daily forecast услугите.
# Кориснички интерфејс
WeatherStation се одликува со едноставен кориснички интерфејс, кој се состои еден главен прозорец. Во него централно место зазема сликичка која го опишува и се менува во зависност од времето и околу неа се распоредени сите останати информации. Во десната страна на прозорецот се наоѓа седумдневната прогноза во форма на листа од контроли, за секој ден по една. Горе во прозорецот се наоѓа лентата за мени, која нуди избор помеѓу Settings и Help. Долу може да се забележат полето за внесување град, копчиња за избор на единици мерки и копчето за обновување/преземање на временската прогноза.  
  
![](https://imagizer.imageshack.us/v2/1137x524q90/923/bwZp9k.png)  
# Функционалност
WeatherStation се одликува со неколку функции, од кои најважна е пребарувањето на градови. Истата е едноставно имплементирана: корисникот го впишува името на посакуваниот град во полето за внесување на текст и го притиска копчето Get Weather. Ако внесениот град постои или е успешно пронајден, се добиваат податоци за временската прогноза и погледот се освежува, во спротивно корисникот е известен дека бараниот град не е пронајден и не се случува ништо. 
  
![](https://imagizer.imageshack.us/v2/600x348q90/924/fVhdUe.png)
  
Исто така корисникот може да одбере со кои мерни единици да бидат претставени мерењата, одбирајќи еден од два понудени избора (Imperial, Metric).
Доколку корисникот сака да го освежи постоечкото мерење за веќе внесен град, истото може да го направи со притискање на истото копче за внесување град, кое додека полето за внесување град е празно и веќе е внесен некој град, служи за освежување на мерењето на внесениот град и се води под името Update Weather.
  
![](https://imagizer.imageshack.us/v2/1152x523q90/923/yYTGL1.png)
  
Лентата за мени нуди две опции: Settings и Help. Во Settings може да се постават опции за автоматско освежување на прогнозата, временскиот интервал на кој ќе се освежува и дали при уклучување на програмата ќе се освежат мерењата.
  
![](https://imagizer.imageshack.us/v2/641x331q90/923/zZss3D.png)
  
Во Help може да се најдат дополнителни информации за проектот и неговите развивачи.
  
![](https://imageshack.com/i/pnExViF5p)
  
При стартување програмата прво пробува да ги прочита подесувањата за автоматско освежување (ако постојат) и потоа да го отвори претходното мерење (ако постои). Ако успее да го прочита претходното мерење, го освежува мерењето (ако е така подесено) и го освежува погледот. Во спротивно, корисникот се известува дека мерењето не е пронајдено и погледот се поставува на подразбирани вредности.
  
![](https://imagizer.imageshack.us/v2/452x277q90/924/SqDPaL.png)
  
![](https://imagizer.imageshack.us/v2/1162x576q90/924/LTow99.png)
  
При секое успешно извршено мерење програмата го зачувува истото во бинарен документ, за при исклучување и повторно уклучување на програмата истото може да биде вчитано. Подесувањата за автоматско освежување се исто така зачувани во посебен бинарен документ при секоја успешна промена.
  
![](https://imagizer.imageshack.us/v2/623x244q90/922/oZpPHx.png)
# Имплементација

WeatherStation како извор за податоците го користи слободното API на [OpenWeatherMap](https://openweathermap.org/). Ова API овозможува WeatherStation да може во секој момент да ја добие најновата временска прогноза, која ги вклучува минималната и максималната временска температура, влажноста на воздухот, изгрев и залез на сонцето, како и брзина на ветер. WeatherStation покрај дневната прогноза дава прогноза и за наредните шест дена.



Парсирањето на податоците се врши во WeatherMap класата, која од базата на OpenWeatherMap ги презема податоците во форма на XML датотека и ги преведува во потребните класи, WeatherMeasurement и ShortWeatherMeasurement. WeatherMeasurement класата ги содржи податоците за тековната дневна прогноза, додека ShortWeatherMeasurement е составена од мерењата за поединечните денови. За секој ден за кој има прогноза има ShortWeatherMeasurement, кое се чува во листа.

Главната форма поделена на два дела: дел за тековната прогноза и дел за прогнозите за следните денови, кои се сместени во листа. Тоа е реализирано со помош на FlowLayoutPanel, кој овозможува динамичко додавање на контроли. Секое дневно мерење е претставено со WeatherView контрола, која е наменски изработена за овој проект.

При освежување на податоците, се освежува и формата така што се прилагодува позадинската боја да одговара на тековната прогноза со однапред дефинирани бои, и се менува иконата за прогнозата. За дополнителен визуелен ефект сето тоа е анимирано со помош на Timer, кој за придвижува иконата до нејзината позиција со fade-in ефект и ја прелева старата позадинска боја во новата. Исто така, во зависност од температурата, и лабелата за температура ја менува својата боја.

